<!DOCTYPE html>
<html>
    <head>
        <title>GBA GameCenter</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <!--Required Scripts-->
        <script src="IodineGBA/includes/TypedArrayShim.js"></script>
        <script src="IodineGBA/core/Cartridge.js"></script>
        <script src="IodineGBA/core/DMA.js"></script>
        <script src="IodineGBA/core/Emulator.js"></script>
        <script src="IodineGBA/core/Graphics.js"></script>
        <script src="IodineGBA/core/RunLoop.js"></script>
        <script src="IodineGBA/core/Memory.js"></script>
        <script src="IodineGBA/core/IRQ.js"></script>
        <script src="IodineGBA/core/JoyPad.js"></script>
        <script src="IodineGBA/core/Serial.js"></script>
        <script src="IodineGBA/core/Sound.js"></script>
        <script src="IodineGBA/core/Timer.js"></script>
        <script src="IodineGBA/core/Wait.js"></script>
        <script src="IodineGBA/core/CPU.js"></script>
        <script src="IodineGBA/core/Saves.js"></script>
        <script src="IodineGBA/core/sound/FIFO.js"></script>
        <script src="IodineGBA/core/sound/Channel1.js"></script>
        <script src="IodineGBA/core/sound/Channel2.js"></script>
        <script src="IodineGBA/core/sound/Channel3.js"></script>
            <script src="IodineGBA/core/sound/Channel4.js"></script>
            <script src="IodineGBA/core/CPU/ARM.js"></script>
            <script src="IodineGBA/core/CPU/THUMB.js"></script>
            <script src="IodineGBA/core/CPU/CPSR.js"></script>
            <script src="IodineGBA/core/graphics/Renderer.js"></script>
            <script src="IodineGBA/core/graphics/RendererProxy.js"></script>
            <script src="IodineGBA/core/graphics/BGTEXT.js"></script>
            <script src="IodineGBA/core/graphics/BG2FrameBuffer.js"></script>
            <script src="IodineGBA/core/graphics/BGMatrix.js"></script>
            <script src="IodineGBA/core/graphics/AffineBG.js"></script>
            <script src="IodineGBA/core/graphics/ColorEffects.js"></script>
            <script src="IodineGBA/core/graphics/Mosaic.js"></script>
            <script src="IodineGBA/core/graphics/OBJ.js"></script>
            <script src="IodineGBA/core/graphics/OBJWindow.js"></script>
            <script src="IodineGBA/core/graphics/Window.js"></script>
            <script src="IodineGBA/core/graphics/Compositor.js"></script>
            <script src="IodineGBA/core/memory/DMA0.js"></script>
            <script src="IodineGBA/core/memory/DMA1.js"></script>
            <script src="IodineGBA/core/memory/DMA2.js"></script>
            <script src="IodineGBA/core/memory/DMA3.js"></script>
            <script src="IodineGBA/core/cartridge/SaveDeterminer.js"></script>
            <script src="IodineGBA/core/cartridge/SRAM.js"></script>
            <script src="IodineGBA/core/cartridge/FLASH.js"></script>
            <script src="IodineGBA/core/cartridge/EEPROM.js"></script>
            <!--Add your webpage scripts below-->
            <script src="user_scripts/XAudioJS/swfobject.js"></script>
            <script src="user_scripts/XAudioJS/resampler.js"></script>
            <script src="user_scripts/XAudioJS/XAudioServer.js"></script>
            <script src="user_scripts/IodineGBAROMLoadGlueCode.js"></script>
            <script src="user_scripts/IodineGBAJoyPadGlueCode.js"></script>
            <script src="user_scripts/IodineGBASavesGlueCode.js"></script>
            <script src="user_scripts/IodineGBAGraphicsGlueCode.js"></script>
            <script src="user_scripts/IodineGBAAudioGlueCode.js"></script>
            <script src="user_scripts/IodineGBACoreGlueCode.js"></script>
            <script src="user_scripts/base64.js"></script>
            <script>
            function touchBtn(evt,key){
            var keyboardEvent = document.createEvent("KeyboardEvent");
            var initMethod = typeof keyboardEvent.initKeyboardEvent !== 'undefined' ? "initKeyboardEvent" : "initKeyEvent";
            keyboardEvent[initMethod](
                evt, // event type : keydown, keyup, keypress
                true, // bubbles
                true, // cancelable
                    window, // viewArg: should be window
                    false, // ctrlKeyArg
                    false, // altKeyArg
                    false, // shiftKeyArg
                    false, // metaKeyArg
                    key, // keyCodeArg : unsigned long the virtual key code, else 0
                    0 // charCodeArgs : unsigned long the Unicode character associated with the depressed key, else 0
            );
            document.dispatchEvent(keyboardEvent);
            }
            </script>
            <link rel="stylesheet" href="user_css/main.css">
    </head>
    <body>
        <canvas id="emulator_target" width="240px" height="160px"></canvas>
        <div class="touch-controls">
                <div class="touch-dpad">
                    <button id="touch-up" ontouchstart="touchBtn('keydown',38);" ontouchend="touchBtn('keyup',38);">↑</button><br>
                    <button id="touch-left" ontouchstart="touchBtn('keydown',37);" ontouchend="touchBtn('keyup',37);">←</button>
                    <button id="touch-right" ontouchstart="touchBtn('keydown',39);" ontouchend="touchBtn('keyup',39);">→</button><br>
                    <button id="touch-down" ontouchstart="touchBtn('keydown',40);" ontouchend="touchBtn('keyup',40);">↓</button>
                </div>
                <div class="touch-buttons">
                    <button id="touch-select" ontouchstart="touchBtn('keydown',16);" ontouchend="touchBtn('keyup',16);">SEL</button> 
                    <button id="touch-start" ontouchstart="touchBtn('keydown',13);" ontouchend="touchBtn('keyup',13);">STR</button>
                </div>
                <div class="touch-buttons">
                    <button id="touch-a" ontouchstart="touchBtn('keydown',88);" ontouchend="touchBtn('keyup',88);">A</button>
                    <button id="touch-b" ontouchstart="touchBtn('keydown',89);" ontouchend="touchBtn('keyup',89);">B</button><br>
                    <button id="touch-l" ontouchstart="touchBtn('keydown',49);" ontouchend="touchBtn('keyup',49);">L</button>
                    <button id="touch-r" ontouchstart="touchBtn('keydown',50);" ontouchend="touchBtn('keyup',50);">R</button>
                </div>
            </div>
        <span id="tempMessage"></span>
    </body>
</html>
